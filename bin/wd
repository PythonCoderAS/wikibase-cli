#!/usr/bin/env node

// This use to be a simple one line shell script, but due to
// compatibility reasons with Windows, it needed to be rewritten
// in the one environment we know is available: node

const { spawn } = require('child_process')

const escapeDollars = arg => arg.replace(/\$/g, '\\$')
const args = process.argv.slice(2).map(escapeDollars)

spawn('wb', args, {
  env: Object.assign({
    WB_INSTANCE: 'https://www.wikidata.org',
    WB_SPARQL_ENDPOINT: 'https://query.wikidata.org/sparql',
  }, process.env),
  stdio: 'inherit',
  // Required to not get a ENOENT on Windows
  // See https://stackoverflow.com/a/54515183/3324977
  shell: true,
})
