#!/usr/bin/env node
const program = require('commander')
const pkg = require('../package.json')
const { red } = require('chalk')

const cmds = {
  label: require('../configs/label'),
  claims: require('../configs/claims'),
  data: require('../configs/data'),
  props: require('../configs/props'),
  id: require('../configs/id'),
  sparql: require('../configs/sparql'),
  query: require('../configs/query'),
  open: require('../configs/open'),
  coord: require('../configs/coord'),
  'set-label': require('../configs/set-label'),
  'add-claim': require('../configs/add-claim'),
  'add-reference': require('../configs/add-reference'),
  config: require('../configs/config')
}

const cmdsList = Object.keys(cmds)

program
.version(pkg.version)
.command(`label ${cmds.label.args}`, cmds.label.description)
.command(`claims ${cmds.claims.args}`, cmds.claims.description)
.command(`data ${cmds.data.args}`, cmds.data.description)
.command(`props ${cmds.props.args}`, cmds.props.description)
.command(`id ${cmds.id.args}`, cmds.id.description).alias('wikiqid')
.command(`sparql ${cmds.sparql.args}`, cmds.sparql.description)
.command(`query ${cmds.query.args}`, cmds.query.description)
.command(`open ${cmds.open.args}`, cmds.open.description)
.command(`coord ${cmds.coord.args}`, cmds.coord.description)
.command(`set-label ${cmds['set-label'].args}`, cmds['set-label'].description).alias('sl')
.command(`add-claim ${cmds['add-claim'].args}`, cmds['add-claim'].description).alias('ac')
.command(`add-reference ${cmds['add-reference'].args}`, cmds['add-reference'].description).alias('ar')
.command(`config ${cmds.config.args}`, cmds.config.description)
.parse(process.argv)

const commandName = program.args[0]

if (!cmdsList.includes(commandName)) {
  console.error(red('unknown command'))
  program.help()
  process.exit(1)
}
