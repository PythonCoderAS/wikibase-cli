#!/usr/bin/env node
const program = require('commander')
const fs = require('fs')
const { red } = require('chalk')
let arg = process.argv.slice(2)[0]
let data

if (arg) {
  try {
    // Accept the item data as a JSON string
    if (arg[0] === '{') {
      data = arg
    // Or as a file path
    } else {
      data = fs.readFileSync(arg).toString()
    }
    program._customArgs = [ JSON.parse(data) ]
  } catch (err) {
    console.error(red('the argument should be a valid JSON or a JSON file path'))
    process.exit(1)
  }
}

require('../lib/edit/edit_command')('item', 'create')
